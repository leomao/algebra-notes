%! TEX root=../main.tex
\subsection{Artinian rings and DVR (week 13)}
\subsubsection{Artinian rings}

\begin{definition}
  $R$ is called an Artinian ring if one of the followings holds:
  \begin{itemize}
    \item any non-empty set of ideals has a minimal element.
    \item any descending chain of ideals is stationary (DCC).
  \end{itemize}
\end{definition}


\underline{Goal:}
\begin{enumerate}
  \item $R \cong R_1 \times \dots \times R_l$ where $R_i$ is an Artinian
    local rings.
  \item Artinian $\iff$ Noetherian $+ \dim = 0$.
\end{enumerate}

\begin{prop} \leavevmode \label{prop:radical-power-relation} 
  \begin{itemize}
    \item  $\sqrt{\mf_i^{n_i} + \mf_j^{n_j}} = \sqrt{\sqrt{\mf_i^{n_i}} + 
      \sqrt{\mf_j^{n_j}}}$
      \begin{proof} $ $\\ 
        "$\subseteq$": Obvious.

        "$\supseteq$" $\forall a \in \text{RHS}$, that is, $a^n = b + c$ with 
        $b^k \in \mf_i^{n_i}$ and $c^t \in \mf_j^{n_j}$. Then 
        $(a^n)^{k+t} = (b + c)^{k + t} = b^{k+t} + \dots + {{k+t} \choose t} b^kc^t
        + \dots + c^{k+t}$. Every term is in either $\mf_i^{n_i}$ or $\mf_j^{n_j}$,
         then $(a^n)^{k+t} = c + d$ with $c \in \mf_i^{n_i},\ d \in \mf_j^{n_j}$
         $\Rightarrow a \in \text{LHS}$
      \end{proof}
    \item If $m$ is prime, $\sqrt{m^{n}} = m$
      \begin{proof} $ $\\
        $"\subseteq"$: If $a \in \text{LHS}$, then $a^k \in m^{n} \subset m$ and $m$ is prime.
        $\Rightarrow a \in m$.

        $"\supseteq"$: If $a \in \text{RHS}$, then $a^n \in m^n \implies a^n \in \text{LHS}$.
      \end{proof}
     \item If $m$, $m_i, i = 1, \cdots, n$ are prime and $m \supseteq m_1 \cap
       \cdots \cap m_n$, then $m \supseteq m_i$ for some i.
       \begin{proof} $ $\\
         Suppose not, then we pick $a_i \in m_i \setminus m$. Then $b \triangleq a_1\cdots a_n \in m_i
         , \, \forall i$. So $b \in m_1 \cap \cdots \cap m_n \subseteq m$. But
         $m$ is prime, so exist $a_i \in m$, which is a contradiction. 
       \end{proof}
  \end{itemize}
\end{prop}


\begin{prop} \label{artin-ring-basic-property}
  Let $R$ be an Artinian ring
  \begin{enumerate}[(1)]
    \item If $I \subseteq R$, then $\quot{R}{I}$ is also Artinian.
    \item If $R$ is an integral domain, then $R$ is a field.
      \begin{proof}
        $\forall a \neq 0 \in R, \gen{a} \supseteq \gen{a^2} \supseteq \dotsm$
        is a descending chain of ideals $\implies \gen{a^l} = \gen{a^{l+1}} = \dotsm$
        for some $l \in \Nb \implies a^l = ba^{l+1} \implies a^l(1 - ab) = 0
        \implies ab = 1$ since cancellation works in integral domain.
      \end{proof}
    \item $\Spec R = \Max R$. ($\implies \dim R = 0$)
      \begin{proof}
        $\forall p \in \Spec R, \quot{R}{p}$ is an integral domain
        $\implies \quot{R}{p}$ is a field $\implies p \in \Max R$.
      \end{proof}
    \item $\abs{\Max R} < \infty$.
      \begin{proof}
        Consider the set $\Set*{ \bigcap\limits_{\text{finite}} \mf \given \mf \in \Max R}
        \ne \varnothing$. So there exists a minimal element in this set since $R$ is Artinian,
        say $\mf_1 \cap \dots \cap \mf_k$.  Now, for $\mf \in \Max R$, we have
        $\mf\cap \mf_1\cap \dots \cap\mf_k = \mf_1\cap \dots \cap\mf_k$ since the
        latter is minimal, so $\mf \supseteq \mf_1\cap \dots\cap\mf_k
        \implies \mf \supseteq \mf_i$ for some $i$, by 3.\ of proposition~\ref{prop:radical-power-relation}.
        Then $\mf = \mf_i$, since $\mf_i$ is max. So $\Max R = \set{\mf_1, \dots, \mf_k}$.
      \end{proof}
    \item $\exists n_1, \dots, n_k \in \Nb$ s.t.
      $\gen{0} = \mf_1^{n_1}\mf_2^{n_2} \dotsm \mf_k^{n_k}
      = \mf_1^{n_1}\cap \mf_2^{n_2} \cap \dots \cap \mf_k^{n_k}$.
      \begin{proof}
        First we claim that $\mf_1^{n_1}\mf_2^{n_2} \dotsm \mf_k^{n_k}
        = \mf_1^{n_1}\cap \mf_2^{n_2} \cap \dots \cap \mf_k^{n_k}$.
        Recall that if $I_i, I_j$ are coprime for $i \ne j$, then
        $\prod\limits_{i=1}^n I_i = \bigcap\limits_{i=1}^n I_i$.
        By Prop~\ref{prop:radical-power-relation}
         \[
          \sqrt{\mf_i^{n_i} + \mf_j^{n_j}}
          = \sqrt{\sqrt{\mf_i^{n_i}} + \sqrt{\mf_j^{n_j}}}
          = \sqrt{\mf_i + \mf_j} = \sqrt{R} = R
          \implies \mf_i^{n_i} + \mf_j^{n_j} = R.
        \]

        Now, let $n_i$ be the one so that $\mf_i^{n_i} = \mf_i^{n_i+1}$.
        We claim that $\mf_1^{n_1}\mf_2^{n_2} \dotsm \mf_k^{n_k} = \gen{0}$.

        If not, let $\Sc = \Set{J \subseteq R \given J \mf_1^{n_1}
          \mf_2^{n_2} \dotsm \mf_k^{n_k} \neq 0} \neq \varnothing$
        since $\mf_i \in S$.
        By the fact that $R$ is Artinian, there exists
        a minimal element $J_0 \in \Sc$.
        By definition of $\Sc$, $\exists x \in J_0$ so that $x\mf_1^{n_1}\mf_2^{n_2} \dotsm \mf_k^{n_k}
        \neq 0$. Then $\gen{x} \in \Sc$ $\gen{x} \subseteq J_0$
        which by the minimality we must have $\gen{x} = J_0$.\\

        Also, $x \mf_1^{n_1+1}\mf_2^{n_2+1} \dotsm \mf_k^{n_k+1} =
        x \mf_1^{n_1}\mf_2^{n_2} \dotsm \mf_k^{n_k} \ne \gen{0}$,
        so $I = x \mf_1\dots \mf_k\in \Sc$ and $I \subseteq xR = J_0 \implies I = xR$.
        Then we have $\mf_1 \mf_2 \dotsm \mf_k = \mf_1 \cap \mf_2 \cap \dots \cap \mf_k = \Jac R$
        with $\Jac R (xR) = xR$ since $\Max R = \Spec R$. By Nakayama's lemma, $xR = 0 \implies x = 0$
        which leads to a contradiction.
      \end{proof}
    \item The nilradical $\nf_R$ of $R$ is nilpotent.
      \begin{proof}
        Again, $\nf_R = \mf_1 \cap \dotsb \cap \mf_k = \Jac R$. Let
        $n = \max \set{n_1, \dots, n_k}$ in (5), then
        $\nf_R^n = (\mf_1\mf_2 \dotsm\mf_k)^n = 0$.
      \end{proof}
  \end{enumerate}
\end{prop}

\begin{theorem}
  If $R$ is an Artinian ring,
  then $R \cong R_1 \times \dots \times R_k$ where each $R_i$ is Artinian local ring.
\begin{proof}
  By Chinese Remainder theorem,
  \[
    R \cong \quot{R}{\gen{0}} = \quot{R}{\mf_1^{n_1}\mf_2^{n_2} \dotsm \mf_k^{n_k}}
    \cong 
    \quot{R}{\mf_1^{n_1}} \times \quot{R}{\mf_2^{n_2}} \times \dots \times \quot{R}{\mf_k^{n_k}}
  \]
  Let $R_i = \quot{R}{\mf_i^{n_i}}$, which is Artinian since
  it is the quotient of an Artinian ring. Since
  quotient preserves maximality, $\bar{\mf} \in \Max R_i \iff
  \mf \in \Max R$. But then $\mf \supset \mf_i^{n_i} \implies \mf = \mf_i$.
  Since $\mf_i = \sqrt{\mf_i^{n_i}}$ is the smallest prime containing $\mf_i^{n_i}$
  by proposition~\ref{prop:property-of-prime-and-primary}.
  So $\Max R_i = \Set{\ob{\mf_i}} \implies R_i$ is a local ring.
\end{proof}
\end{theorem}

\begin{lemma} \label{vector-space-dim-acc-dcc-relation}
  Let $V$ be a $K$-vector space, TFAE
  \begin{enumerate}[(1)]
    \item $\dim_K V < \infty$
    \item $V$ has DCC on subspaces.
    \item $V$ has ACC on subspaces.
  \end{enumerate}

  \begin{proof} $ $ \\
    \underline{Fact} : If $V_1 \subseteq V_2$ is finite dimensional vector space
    over $K$, then $V_1 = V_2 \iff \dim_K V_1 = \dim_K V_2$. Otherwise, $\dim_K V_1 < \dim_K V_2$. \\
    (1) $\Leftrightarrow$ (3) \\
    $"\Rightarrow"$ Suppose there exists a chain in vector space $V$ with strictly
    increasing and infinite length,
    \[
      V_1 \subset V_2 \subset \cdots \subseteq V \Rightarrow \dim_K V_1 < \dim_K V_2 < \cdots 
      \leq \dim_K V
    \]
    Then, $\dim_K V$ must be infinite. \\
    $"\Leftarrow"$ If $\dim_K V$ is infinite, let S = $\{b_1, b_2, \dots \}$ be basis of V.
    \[
      \gen{b_1}_K \subset \gen{b_1 , b_2}_K \subset \cdots
    \]
    is a infinite ascending chain.\\
    Similarily, (1) $\Leftrightarrow$ (2).
  \end{proof}
\end{lemma}

\begin{lemma}
If $R$ is Northerian and $\dim R = 0$, then there exist $\mf_i, n_i$ so that
$\mf_1^{n_1} \mf_2^{n_2} \dotsm \mf_k^{n_k} = \gen{0}$.

\begin{proof}
  By primary decomposition, $\gen{0} = \bigcap_{i=1}^k q_i$ for
  some primary ideals $q_i$. Let $\mf_i = \sqrt{q_i}$, since
  $\mf_i$ finitely generated, say $\mf_i = \gen{x_1, \dots, x_k}$.
  Since $\mf_i = \sqrt{q_i}$, for each $x_i$, exists $r_i$
  so that $x_i^{r_i} \in q_i$. Let $n_i = \max \Set{r_i}$
  and one could easily see that $\mf_i^{n_i} \subset q_i$.
  Thus
  \[
    \mf_1^{n_1}\mf_2^{n_2} \dotsm \mf_k^{n_k} = 
    \mf_1^{n_1} \cap \mf_2^{n_2} \cap \dotsm \cap \mf_k^{n_k} \subseteq
    q_1 \cap q_2 \cap \dotsm \cap q_k = \gen{0}
  \]
\end{proof}
\end{lemma}

\begin{theorem}
  $R$ is Artinian $\iff$ $R$ is Noetherian with dimension $0$.


\begin{proof}
  In both case we could find maximal ideals $\mf_1, \dots, \mf_n$
  not necessarily different in $R$ such that $\mf_1\mf_2 \dotsm \mf_n = 0$.
  So we shall prove that this implies Artinian $\iff$ Noetherian.

  Observe that we have a chain of ideals in $R$:
  $R \supset \mf_1 \supset \mf_1\mf_2 \supset \dots \supset
  \mf_1\mf_2\dotsm\mf_n = 0$.
  Let $M_i = \quot{\mf_1\mf_2\dotsm\mf_{i-1}}{\mf_1\mf_2\dotsm\mf_i}$
  which could be see as an $R$-module.
  Moreover, notice that $\mf_i M_i = 0$, so we $M_i$
  could be regard as $\quot{R}{\mf_i}$-module.
  But $\quot{R}{\mf_i}$ is a field, so $M_i$ can be further regarded as a vector
  space. Hence we could use lemma~\ref{vector-space-dim-acc-dcc-relation} now:
  \[
  \text{ $M_i$ is Artinian $\iff$ $M_i$ is Noetherian. }
  \]

  By definition,
  \[
    0 \to \mf_1\mf_2\dotsm\mf_i \to \mf_1\mf_2\dotsm\mf_{i-1}
    \to M_i \to 0
  \] exact.
  By exercise, given $0 \to K \to M \to L \to 0$ exact, then $M$ Noetherian (Artinian)
  $\iff$ $K, L$ Noetherian (Artinian). Thus
  \[
    \begin{aligned}
      \mf_0 = R \text{ Artinian} & \iff \mf_1 , M_1 \text{ Artinian} \\
      & \iff \mf_1 \mf_2 , M_1, M_2 \text{ Artinian} \\
      & \hspace{13pt} \vdots \\
      & \iff \mf_1 \mf_2 \cdots \mf_n = \gen{0},\, M_1, 
      \dots, M_n \text{ Artinian} \\
      & \iff \mf_1 \mf_2 \cdots \mf_n = \gen{0},\, M_1, 
      \dots, M_n \text{ Noetherian} \\
      & \hspace{13pt} \vdots \\
      & \iff \mf_1 \mf_2 , M_1, M_2 \text{ Noetherian} \\
      & \iff \mf_1 , M_1 \text{ Noetherian} \iff \mf_0 = R \text{ Noetherian}
    \end{aligned}
  \]
\end{proof}
\end{theorem}


\subsubsection{DVR (Discrete Valuation Ring)}

\begin{definition} \mbox{}
  \begin{enumerate}[(1)]
    \item Let $K$ be a field. A discrete valuation of $K$ is
      $\nu: K^\times \onto \Zb$ ($\nu(0) = \infty$) s.t.
      \begin{itemize}
        \item $\nu(xy) = \nu(x) + \nu(y)$.
        \item $\nu(x \pm y) = \min\set{\nu(x), \nu(y)}$.
      \end{itemize}
    \item The valuation ring of $\nu$ is $R = \Set{x \in K \given \nu(x) \ge 0}$,
      called a DVR.
  \end{enumerate}
\end{definition}
\iffalse
\begin{prop} \label{local-neotherian-ring-set-gen-max-gen-qoetient-max}
  Let R be a local Noetherian ring with maximal ideal $\mf$. Then $t_1, \cdots t_n
  \in \mf$ generate $\mf$ if and only if thier images generate $\mf / \mf^2$ as an
  $R/\mf$ vector space.
  \begin{proof} \hfill
    The $"\Rightarrow"$ is simple. \\
    $"\Leftarrow"$ \\
    Let $N = \gen{t_1, \cdots , t_n} \subseteq \mf$ and images of $t_1, \cdots, t_n
    \in \mf / \mf^2$ generate $\mf / \mf^2$ as $R/\mf$-vector space, then we have
    $$
      N+\mf^2 = \mf + \mf^2 \implies (N + \mf^2) / N = (\mf + \mf^2) / N
      \implies \mf(\mf/N) = \mf / N
    $$
    where we have used $N/N = 0$ and $\mf + \mf^2 = \mf$. By Nakayama's lemma, $M =
     \mf / N$ is zero module, so $\mf = N$ and $t_1, \cdots, t_n$ generate $\mf$.
  \end{proof}
\end{prop}
\fi
\begin{prop} \hfill \label{prop:property-of-dvr}
\begin{enumerate}
  \item $\nu(1) = 0$:
    \begin{proof}
      $\nu(1) = \nu(1) + \nu(1) \implies \nu(1) = 0$
    \end{proof}
  \item $\nu(x) = -\nu(x^{-1})$:
    \begin{proof}
      $0 = \nu(xx^{-1}) = \nu(x) + \nu(x^{-1})$
    \end{proof}
  \item $\nu(x) = 0 \iff$ $x$ is a unit,
    so $\mf = \Set{x \in R \given \nu(x) > 0}$ is the unique maximal ideal
    \begin{proof}
      ``$\Rightarrow$'': $\nu(x) = 0 \implies \nu(x^{-1}) = 0 \implies x^{-1} \in R$ \\
      ``$\Leftarrow$'':
        Then $\nu(x^{-1}), \nu(x) \ge 0.$, so $\nu(x) = -\nu(x) \le 0 \implies
        \nu(x) = 0$.
    \end{proof}
  \item Let $t \in R$ with $\nu(t) = 1$, then $\mf = \gen{t}$.
    More over, each element $x \in \mf$ could be uniquely written as $x = t^k u$
    where $u$ is a unit.
    \begin{proof}
      $\forall x \in \mf, \nu(x) = k > 0$, so $\nu\big(x(t^k)^{-1}\big) =
      \nu(x) - k\nu(t) = 0 \implies x = t^ku$, where $u$ is unit in $R$.
    \end{proof}
  \item Let $I \subseteq \mf$ and define
    $m = \min\Set{l \in \Nb \mid x = t^l u, \, \forall x \in I}$.
    Then $I = \gen{t^m}$.
    \begin{proof}
      ``$\subseteq$'': Immediately by the previous statement.
      ``$\supseteq$'': Let $x = t^m u$ be the one letting $l = m$,
      then $t^m = x u'$ for some $u'$ since where $u$ is a unit.
    \end{proof}
\end{enumerate}
\end{prop}

\begin{prop} \label{dvr-equiv-condition}
  $R$ is a DVR $\iff$ $R$ is 1-dimensional normal, Noetherian local integral domain.
  \begin{proof} \hfill \\
    ``$\Rightarrow$'':
    \begin{tikzpicture}[baseline,
      implies/.style={double,double equal sign distance,-implies} 
      ]
      \node(DVR) at (0, 0) {DVR};
      \node(PID) at (1.5, 0) {PID};
      \node(UFD) at (3, 0.3) {UFD};
      \node(normal) at (5, 0.3) {normal};
      \node(Noeth) at (3.5, -0.3) {Noetherian};
      \draw (DVR.east) edge[implies] (PID.west);
      \draw (PID.east) edge[implies] (UFD.west);
      \draw (UFD.east) edge[implies] (normal.west);
      \draw (PID.east) edge[implies] (Noeth.west);
    \end{tikzpicture} \\
    Where $\text{UFD} \implies \text{normal}$ by theorem~\ref{thm:ufd-is-normal}.

    Now if $P$ is a prime ideal in $R$, then by 5.\ of proposition~\ref{prop:property-of-dvr},
    $P = \gen{t^k} = \mf^k$ where $\mf$ is the maximal ideal.
    Then $P = \sqrt{P} = \sqrt{\mf^k} = \mf$ since $\mf$ maximal. Thus the only
    prime ideals are $\Set{0, \mf}$ and thus $R$ has dimension $1$.

    $"\Leftarrow"$: Let $\mf$ be the unique maximal ideal.
    Then $\Spec R = \Set{0, \mf}$.
    If $\mf = \mf^2$ then since $\Jac R = \mf$, $\mf = 0$ by Nakayama's lemma,
    so $\mf^2 \neq \mf$. Pick $t \in \mf \setminus \mf^2$.
    We claim that $\gen{t} = \mf$. If not, then $M \triangleq \mf / \gen{t} \neq 0$.
    See $M$ as an $R$-module and consider $S \triangleq \Set{ \Ann(\bar{x}) \mid \bar{x} \neq 0 \in M }$.
    Since $R$ Noetherian, there is a maximal element, say $I = \Ann(\bar{x})$.

    We shall prove that $I$ is prime. If not, then there are $ab \in I$
    but $a, b \notin I$, which is to say that $ab\bar{x} = 0$ but $b \bar{x} \neq 0$.
    Notice the obvious fact $\Ann(\bar{x}) \subseteq \Ann(b\bar{x})$,
    but $b \bar{x} \ne 0$ and by the maximality of $\Ann(\bar{x})$,
    $\Ann(\bar{x}) = \Ann(b\bar{x})$, then $a \in \Ann(b\bar{x}) = \Ann(\bar{x})
    \implies ax = 0$, which is a contradiction, thus $I$ is prime.

    So, if $M \neq 0$, then we could pick $\bar{x}$ such that $\Ann(\bar{x})$
    is a prime, and thus $\Ann(\bar{x}) = \mf$.
    Now, $x \mf \subset \gen{t} = tR$, so $J \triangleq (x/t) \mf \subset R$ in the field of fractions.
    \begin{itemize}
      \item If $J = R$, then there exists $y \in \mf$ so that $xy / t = 1 \implies t = xy \in \mf^2$,
        which is a contradiction to the definition of $t$.
      \item If $J \neq R$, then $J$ is contained in the maximal ideal $\mf$,
        so $(x/t) \mf = \mf$. Since $\mf$ is finitely generated, $\mf = \gen{y_1, \dots, y_k}$.
        Then $(x/t) y_i = \sum a_{i, j} y_j$. Using the routine determinant trick,
        $f(x/t) m = 0, \forall m \in \mf \implies f(x/t) = 0$ for some monic polynomial $f \in R[x]$.
        Then $x/t$ is integral over $R$. But then $x/t \in R$ since $R$ normal,
        and thus $x \in Rt$, which contradicts how we picked $x$.
    \end{itemize}

    Thus $\mf = \gen{t}$ is principal. Now, by the exercise problem,
    $\bigcap_{n = 0}^\infty \mf^n = 0$. So for each $x \in R$,
    there exists a unique $k$ such that $x \in \mf^k$ but $x \notin \mf^{k+1}$.
    Write $x = t^k u$, then $u \notin \mf$ implies that $u$ is a unit.
    One could easily see that this representation is actually unique.

    Finally, define $\nu(x) = k$, one could easily check that this definition
    extends well to the field of fractions, so $R$ is a DVR.
  \end{proof}
\end{prop}

\subsubsection{Dedekind domains}
\begin{definition}
  A Dedekind domain is a Noetherian normal domain of $\dim 1$.
\end{definition}

\begin{definition}
  Let $R$ be an integral domain and $K = \Frac(R)$.
  A nonzero $R$-submodule $I$ of $K$ is called a fractional ideal of $R$ if
  $\exists 0 \ne a \in R$ s.t. $aI \subset R$.
\end{definition}

\begin{example} \label{eg:finitely-generated-is-fractional-ideal}
  If $I = \gen{f_1, \dots, f_n}_R$, a finitely generated $R$-module
  with $f_i = \frac{a_i}{b_i} \in K$, then
  $a = b_1b_2 \dotsm b_n$ and $aI \subset R \implies I$ is fractional.

  In general, if $R$ is a Noetherian, then every fractional ideal $I$ of $R$
  is finitely generated.
\end{example}

\begin{definition}
  A fractional ideal $I$ of $R$ is invertible if $\exists J:$ a fractional ideal
  of $R$ s.t. $IJ = R$.
\end{definition}

\begin{prop}\mbox{} \label{prop:property-of-fractional-ideal}
  \begin{enumerate}
    \item If $I$ is invertible, then $J = I^{-1}$ is unique and equal to
      $J = (R:I) \triangleq \Set{a \in K \given aI \subset R}$.
      \begin{proof}
        $ J \subseteq (R:I) \subseteq (R:I)R \subseteq (R:I)IJ \subseteq RJ = J
        \implies J = (R:I) $
      \end{proof}
    \item If $I$ is invertible, then $I$ is a finitely generated $R$-module.
      \begin{proof}
        If $I(R:I) = R$ then $1 = \sum\limits_{i = 0}^{k} x_iy_i$, for some $x_i \in I$ and
        $y_i \in (R:I)$. Then, $\forall x \in I$, $x = \sum\limits_{i = 0}^{k} 
        \underbrace{(xy_i)}_{\in R}x_i$ Thus $I = \gen{x_0, \dots, x_k}_R$.
      \end{proof}
  \end{enumerate}
\end{prop}

\begin{prop} \label{prop:equvalence-of-dvr-with-fractional-ideal}
    Let $R$ be a local domain but not a field, $K = \Frac(R)$.
      Then $R$ is a DVR $\iff$ every nonzero fractional ideal $I$ of $R$ is
      invertible.
      \begin{proof}
        $"\Rightarrow"$:
        Let $I$ be fractional ideal of $R$,
        then $\exists a \in R \text{ s.t. } aI \subseteq R$.
        Since $R$ is a DVR which is not a field,
        the maximal ideal $\mf = \gen{t}$ for some $t \ne 0$.
        We know from proposition~\ref{prop:property-of-dvr}
        that $a = t^k u$ where $u$ is a unit in $R$.
        \begin{itemize}
          \item If $aI = R$, then let $J \triangleq \gen{a}_R$ and $JI = R$.
          \item If $aI \ne R$, then $aI = \gen{t^l}$ again since $R$
            is DVR. Then $I = \gen{t^{l-k}}$, let $J = \gen{t^{k-l}}$
            and we have $IJ = R$.
        \end{itemize}

        $"\Leftarrow"$:
        First, for any $I \subset R$, which is obvious a fractional ideal,
        so $I$ is invertible, and hence by proposition~\ref{prop:property-of-fractional-ideal},
        $I$ is finitely generated, thus $R$ is Noetherian.

        Let $\mf$ be the unique maximal ideal, then if $\mf^2 = \mf$,
        since $R$ Noetherian, by Nakayama's lemma, $\mf = 0$,
        which contradicts the fact that $R$ is not a field.

        Thus pick $t \in \mf \setminus \mf^2$. Consider $t \mf^{-1}$
        which is in $R$ since $t \in \mf$.
        If $t \mf^{-1} \subseteq \mf$, then $t \mf^{-1} \mf = t R \subseteq \mf^2 \implies
        t \in \mf^2$, which is a contradiction. So $t \mf^{-1} = R \implies tR = \mf$.
        Using the same construction $\nu$ in proposition~\ref{dvr-equiv-condition},
        $R$ is a DVR.
      \end{proof}
\end{prop}

\begin{theorem}
  Let $R$ be an integral domain and $K= \Frac(R)$. TFAE
  \begin{enumerate}[(a)]
    \item $R$ is a Dedekind domain.
    \item $R$ is Noetherian and $R_P$ is a DVR for all $P \in \Spec R$.
    \item Every nonzero fractional ideal of $R$ is invertible.
    \item Every nonzero proper ideal of $R$ can be written (uniquely) as a
      product of powers of prime ideals.
  \end{enumerate}

  \begin{proof} \mbox{}
    \begin{description}
      \item[\rm (a)$\Leftrightarrow$(b):]
        Recall that $R$ is a Dedekind domain if $R$ is (1) Noetherian,
        (2) normal, (3) integral domain with (4) Dimension 1.
        And $R_P$ is a DVR if it is a local Dedekind domain.
        All of these are guaranteed by proposition~\ref{prop:property-of-localization},
        where (4) is by the correspondence of prime ideals.
      \item[\rm (b)$\Leftrightarrow$(c):] We need a small lemma:
        \begin{lemma}
          If $I$ is finitely generated, then $(R_P : I_P) = (R: I)_P$.
          \begin{proof}
            Notice that $I_P$ is then a finitely generated $R_P$-module,
            and thus by example~\ref{eg:finitely-generated-is-fractional-ideal}
            $(R_P: I_P)$ is a fractional ideal.
            Then $(R: I)_P = \Set{ x \mid xI \subset R}_P
            = \Set{x \mid x I_P \subset R_P} = (R_P: I_P)$.
          \end{proof}
        \end{lemma}
        By corollary~\ref{coro:modules-are-equal-iff-equal-in-localization},
        we have
        \[
          \forall P \in \Spec R, \ R_P = I_P(R_P : I_P)
          = I_P (R: I)_P = (I (R:I))_P \iff I (R:I) = R.
        \]
        Then use prop~\ref{prop:equvalence-of-dvr-with-fractional-ideal},
        done.

      \item[\rm (a)(b)(c)$\Rightarrow$(d):] $ $ \\
        {\bf Existence:} Since $R$ is Noetherian,
        $I = q_1 \cap \cdots \cap q_n = q_1 q_2 \dotsm q_n$.
        Note that the intersection equals the product since
        if we let $P_i \triangleq \sqrt{q_i}$, then $P_i \in \Spec R$,
        and $P_i \ne 0$ is always maximal, so $P_i + P_j = R$,
        which implies $q_i + q_j = R$ (as in proposition~\ref{prop:radical-power-relation}).

        Now, we shall prove that $q_i = P_i^{k_i}$ for some $k_i$.
        By (b), each $R_{P_i}$ is a DVR, which has primary ideals
        of the form $\Set{\mf^k}$. By proposition~\ref{prop:property-of-localization},
        primary ideals are correspondent in localization,
        so $(q_i)_{P_i} = \mf^k \iff q_i = P_i^k$. Thus $k_i = k$
        is what we want. Then we could write $I = P_1^{k_1} \dotsm P_n^{k_n}$.

        {\bf Uniqueness:}
        Actually, the factorization into product of invertible
        prime ideal is unique in any integral domain.

        If $P_1 P_2 \dotsm P_k = Q_1 Q_2 \dotsm Q_r$,
        then $P_1 P_2 \dotsm P_k \subset Q_1$, so there is one,
        say $P_1 \subset Q_1$. Assume $Q_1$ is the minimal among $Q_i$.
        Similarly we could find $Q_i \subset P_1$.
        But then $Q_i \subseteq Q_1$. Since $Q_i$ minimal, $Q_i = Q_1$.
        Now, since these ideals are invertible,
        $P_2 P_3 \dotsm P_k = Q_2 Q_3 \dotsm Q_r$. By induction, the proof is completed.
      \item[\rm (d)$\Rightarrow$(c):]
        \begin{lemma}
          Let $P_i$ be fractional ideals. If $P_1 P_2 \dotsm P_n = \gen{a}$
          is principal, then $P_i$ are invertible.

          \begin{proof}
            $P_i^{-1}$ is actually $a^{-1} P_1 P_2 \dotsm P_{i-1} P_{i+1} \dotsm P_n$.
          \end{proof}
        \end{lemma}
        First we prove that $p$ is maximal if $p$ is prime and invertible.

        \underline{Claim}: For $a \in R \setminus p$, we have $p+ aR = R$
        ($\implies p$ is maximal). \\
        If not, let $p + aR = P_1 \dotsm P_k$ and $p + a^2 R = Q_1 \dotsm Q_r$
        with $a \notin p$.
        Since $P_i, Q_j \supset p$, passing to the quotient $R/p$, we have
        $\bar{a} = \bar P_1 \dotsm \bar P_k, \, \bar{a}^2 = \bar Q_1 \dotsm \bar Q_r$.
        Using the uniqueness of factorization, which only requires $R/p$
        to be an integral domain (which is the case) and $\bar P_i, \bar Q_j$
        be invertible (by lemma above),
        by $\bar{a}^2 = \bar P_1^2 \dotsm \bar P_k^2 = \bar Q_1 \dotsm \bar Q_r$,
        we have $2k = r$ and we could assume $Q_{2i-1} = Q_{2i} = P_i$.
        This shows that $p + a^2 R = (p + aR)^2 \subseteq p^2 + aR$.
        So $p \subseteq p + a^2 R \subseteq p^2 + aR$. Now, if $x \in p$,
        $x = y + az$ for some $y \in p^2, z \in R$. Then $az = x - y \in p$
        but $a \notin p$, so $z \in p$. Thus we could
        refine the relation to $p \subseteq p^2 + ap$.
        But then $p \subseteq p (p + aR)$, since $p$ invertible, $R \subseteq p + aR$
        which implies that $p + aR = R$, which is a contradiction.

        Now, we show that every prime ideal $p$ is invertible. By the assumption,
        let $a \in p$ and $p \supseteq \gen{a} = P_1 \dotsm P_k$, by the lemma above,
        each $P_i$ is invertible and thus maximal by the previous paragraph.
        Since $P_1 \dotsm P_k \subset p$, we have $P_i \subset p$ for some $i$,
        which implies $P_i = p$ since $P_i$ is maximaw. Thus $p$ is invertible.

        Finally, since each ideal is the product of prime ideals,
        and we've just proved that prime ideals are invertible,
        any ideal are invertible. For a fractional ideal $I$,
        $aI \subseteq R \implies \exists J, \, aIJ = R \implies I(aJ) = R$,
        which is to say that $I$ is invertible.
        \qedhere
  \end{description}
  \end{proof}
\end{theorem}
